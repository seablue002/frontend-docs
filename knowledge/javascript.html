<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript知识点 | 前端知识管理系统</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="系统、简洁、可编辑">
    
    <link rel="preload" href="/frontend-docs/assets/css/0.styles.c6b985cd.css" as="style"><link rel="preload" href="/frontend-docs/assets/js/app.111ced23.js" as="script"><link rel="preload" href="/frontend-docs/assets/js/2.b54963b0.js" as="script"><link rel="preload" href="/frontend-docs/assets/js/3.5b4c0c8b.js" as="script"><link rel="preload" href="/frontend-docs/assets/js/7.661b4eb6.js" as="script"><link rel="prefetch" href="/frontend-docs/assets/js/10.6560d505.js"><link rel="prefetch" href="/frontend-docs/assets/js/11.b7e27fb9.js"><link rel="prefetch" href="/frontend-docs/assets/js/12.969ebb80.js"><link rel="prefetch" href="/frontend-docs/assets/js/13.7d50319b.js"><link rel="prefetch" href="/frontend-docs/assets/js/14.ac6937e2.js"><link rel="prefetch" href="/frontend-docs/assets/js/15.25aa9904.js"><link rel="prefetch" href="/frontend-docs/assets/js/16.2de02de5.js"><link rel="prefetch" href="/frontend-docs/assets/js/17.fab6b274.js"><link rel="prefetch" href="/frontend-docs/assets/js/18.ccd1917a.js"><link rel="prefetch" href="/frontend-docs/assets/js/4.e56475da.js"><link rel="prefetch" href="/frontend-docs/assets/js/5.4067c9a3.js"><link rel="prefetch" href="/frontend-docs/assets/js/6.bdfebd24.js"><link rel="prefetch" href="/frontend-docs/assets/js/8.a89ab915.js"><link rel="prefetch" href="/frontend-docs/assets/js/9.c30fa985.js">
    <link rel="stylesheet" href="/frontend-docs/assets/css/0.styles.c6b985cd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-docs/" class="home-link router-link-active"><!----> <span class="site-name">前端知识管理系统</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontend-docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识点" class="dropdown-title"><span class="title">知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识点" class="mobile-dropdown-title"><span class="title">知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/vue/" class="nav-link">
  Vue框架
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/http/" class="nav-link">
  Http&amp;&amp;浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/algorithm/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/vue/" class="nav-link">
  Vue框架
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/http/" class="nav-link">
  Http&amp;&amp;浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/algorithm/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/frontend-docs/today_todos/" class="nav-link">
  今日待办
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontend-docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识点" class="dropdown-title"><span class="title">知识点</span> <span class="arrow down"></span></button> <button type="button" aria-label="知识点" class="mobile-dropdown-title"><span class="title">知识点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/vue/" class="nav-link">
  Vue框架
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/http/" class="nav-link">
  Http&amp;&amp;浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/knowledge/algorithm/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/vue/" class="nav-link">
  Vue框架
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/http/" class="nav-link">
  Http&amp;&amp;浏览器
</a></li><li class="dropdown-item"><!----> <a href="/frontend-docs/examination_questions/algorithm/" class="nav-link">
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/frontend-docs/today_todos/" class="nav-link">
  今日待办
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Javascript知识点</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend-docs/knowledge/javascript.html#_1、闭包" class="sidebar-link">1、闭包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_2、javascript组成部分" class="sidebar-link">2、Javascript组成部分</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_3、本地对象、内置对象和宿主对象" class="sidebar-link">3、本地对象、内置对象和宿主对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_1-本地对象-原生对象native-object" class="sidebar-link">1. 本地对象(原生对象native object)</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_2-内置对象-built-in-object" class="sidebar-link">2. 内置对象(built-in object)</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_3-宿主对象-host-object" class="sidebar-link">3. 宿主对象(host object)</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_4、-数据类型检测" class="sidebar-link">4、 数据类型检测</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_1-typeof方式" class="sidebar-link">1. typeof方式</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_2-instanceof" class="sidebar-link">2. instanceof</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_3-constructor构造函数" class="sidebar-link">3. constructor构造函数</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_4-object-prototype-tostring" class="sidebar-link">4. Object.prototype.toString</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_5-事件循环eventloop" class="sidebar-link">5.事件循环EventLoop</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_6-变量提升、暂时性死区" class="sidebar-link">6. 变量提升、暂时性死区</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_7-伪数组-arraylike" class="sidebar-link">7. 伪数组(ArrayLike)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_1、伪数组的定义和特性" class="sidebar-link">1、伪数组的定义和特性</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_2、伪数组转化成真数组的方法" class="sidebar-link">2、伪数组转化成真数组的方法</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_8-window-onload与-documetn-ready区别" class="sidebar-link">8. window.onload与$(documetn).ready区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_9-script-标签执行与加载时机-defer、async-和防阻塞方法" class="sidebar-link">9. script 标签执行与加载时机：defer、async 和防阻塞方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_10-commonjs-es6-module的区别" class="sidebar-link">10. commonjs es6 module的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_11-some-every-reduce函数" class="sidebar-link">11. some every reduce函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_12-es6新语法" class="sidebar-link">12. ES6新语法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_13-跨域的解决方案" class="sidebar-link">13. 跨域的解决方案</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_14-内存泄漏" class="sidebar-link">14. 内存泄漏</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_15-set与map" class="sidebar-link">15. Set与Map</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_16-浅拷贝、深度拷贝的实现" class="sidebar-link">16. 浅拷贝、深度拷贝的实现</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_17-箭头函数与普通函数的区别" class="sidebar-link">17. 箭头函数与普通函数的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_18-web-worker线程" class="sidebar-link">18. Web Worker线程</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_19-进程-process-和线程-thread-的定义和区别" class="sidebar-link">19. 进程（process）和线程（thread）的定义和区别</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_20-xss-cross-site-scripting-跨站脚本、csrf-cross-site-request-forgery-跨站请求伪造" class="sidebar-link">20. XSS（Cross Site Scripting）跨站脚本、CSRF（Cross-site request forgery）跨站请求伪造</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_21-高并发" class="sidebar-link">21. 高并发</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_22-js异步" class="sidebar-link">22. js异步</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_23-手写promise" class="sidebar-link">23. 手写Promise</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_24-设计原则" class="sidebar-link">24. 设计原则</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_25-常用设计模式" class="sidebar-link">25. 常用设计模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_26-继承方式" class="sidebar-link">26. 继承方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_1、原型链" class="sidebar-link">1、原型链</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_2-借用构造函数" class="sidebar-link">2. 借用构造函数</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_3-组合继承" class="sidebar-link">3. 组合继承</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_4、原型式继承" class="sidebar-link">4、原型式继承</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_5、寄生式继承" class="sidebar-link">5、寄生式继承</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_6、寄生组合式继承" class="sidebar-link">6、寄生组合式继承</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_27-正则" class="sidebar-link">27. 正则</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_28-观察者模式与发布-订阅模式区别" class="sidebar-link">28. 观察者模式与发布/订阅模式区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_1、观察者模式" class="sidebar-link">1、观察者模式</a></li><li class="sidebar-sub-header"><a href="/frontend-docs/knowledge/javascript.html#_2、发布-订阅模式" class="sidebar-link">2、发布/订阅模式</a></li></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_27-常用js函数" class="sidebar-link">27. 常用JS函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend-docs/knowledge/javascript.html#_28-参数默认值、递归、预编译、暗示全局变量" class="sidebar-link">28. 参数默认值、递归、预编译、暗示全局变量</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript知识点"><a href="#javascript知识点" class="header-anchor">#</a> Javascript知识点</h1> <div class="custom-block tip"><p class="custom-block-title">涉及内容</p> <p>包含JS相关的中高级知识点，以及疑难点。
<a href="https://testdrive-archive.azurewebsites.net/Views/SiteMap/" target="_blank" rel="noopener noreferrer">效果补充参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="_1、闭包"><a href="#_1、闭包" class="header-anchor">#</a> 1、闭包 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures" target="_blank" rel="noopener noreferrer">闭包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（closure）是一个函数以及其捆绑的周边环境状态（<strong>lexical environment</strong>，<strong>词法环境</strong>）的引用的组合。换而言之，闭包让开发者可以从内部函数访问外部函数的作用域。</p> <p>闭包会使得变量常驻内存，需要注意使用。</p> <ul><li><strong>特点</strong></li></ul> <ol><li>函数嵌套函数</li> <li>函数内部可以引用外部的参数和变量</li> <li>参数和变量不会被垃圾回收机制回收</li></ol> <ul><li><strong>使用场景</strong></li></ul> <ol><li>模块化、封装减少全局污染，使用闭包模拟私有方法</li> <li>循环赋值（循环中使用闭包，修正i的值）</li></ol> <details class="custom-block details"><summary>code 查看代码</summary> <span class="badge error" style="vertical-align:middle;" data-v-368b07b1>错误做法</span> 未使用闭包
<div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> fnArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fnArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  fnArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre></div> <span class="badge success" style="vertical-align:middle;" data-v-368b07b1>正确做法</span> 使用闭包
<div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> fnArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fnArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  fnArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div></details> <ol start="3"><li>实现公有变量（函数累加器）</li></ol> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">++</span>num
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token function">createCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 返回count函数</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre></div></details> <h2 id="_2、javascript组成部分"><a href="#_2、javascript组成部分" class="header-anchor">#</a> 2、Javascript组成部分 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <ul><li>ECMAScript</li> <li>DOM文档对象模型</li> <li>BOM浏览器对象模型</li></ul> <p><img src="data:image/png;base64,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" alt="image-20230412161415839"></p> <h2 id="_3、本地对象、内置对象和宿主对象"><a href="#_3、本地对象、内置对象和宿主对象" class="header-anchor">#</a> 3、本地对象、内置对象和宿主对象 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <h3 id="_1-本地对象-原生对象native-object"><a href="#_1-本地对象-原生对象native-object" class="header-anchor">#</a> 1. 本地对象(原生对象native object)</h3> <p>ECMA-262 把本地对象（native object）定义为“独立于宿主环境的ECMAScript 实现提供的对象”</p> <p>与宿主无关，无论在浏览器还是服务器中都有的对象，就是ECMAScript标准中定义的类(构造函数)</p> <p>在使用过程中需要我们手动new创建：<mark>String、Number、Boolean、Array、Object、Function、Date、RegExp</mark>等</p> <h3 id="_2-内置对象-built-in-object"><a href="#_2-内置对象-built-in-object" class="header-anchor">#</a> 2. 内置对象(built-in object)</h3> <p>ECMA-262 把内置对象（built-in object）定义为“由 ECMAScript 实现提供的、独立于宿主环境的所有对象，在 ECMAScript 程序开始执行时出现”。这意味着开发者不必明确实例化内置对象，它已被实例化了</p> <p>同样是“独立于宿主环境”。根据定义我们似乎很难分清“内置对象”与“本地对象”的 区别。而ECMA-262 只定义了两个内置对象，即 Global 和 Math （它们也是本地对象， 根据定义，每个内置对象都是本地对象）。如此就可以理解了。</p> <p>内置对象是本地对象的一 种与宿主无关，无论在浏览器还是服务器中都有的对象，ECMAScript已经帮我们创建好的对象，在使用过程中无需我们动手new创建：<mark>Global、Math、JSON</mark></p> <h3 id="_3-宿主对象-host-object"><a href="#_3-宿主对象-host-object" class="header-anchor">#</a> 3. 宿主对象(host object)</h3> <p>宿主就是指JavaScript运行环境，js可以在浏览器中运行，也可以在服务器上运行(nodejs)</p> <p>对于嵌入到网页中的js来说，其宿主对象就是浏览器，所以宿主对象就是浏览器提供的对象</p> <p><mark>Window 和 Document</mark>等</p> <h2 id="_4、-数据类型检测"><a href="#_4、-数据类型检测" class="header-anchor">#</a> 4、 数据类型检测 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <p><code>published</code></p> <h3 id="_1-typeof方式"><a href="#_1-typeof方式" class="header-anchor">#</a> 1. typeof方式</h3> <p><img src="/frontend-docs/assets/img/2023-04-12-165949.62b49d16.png" alt="image-20230412161415839"></p> <h3 id="_2-instanceof"><a href="#_2-instanceof" class="header-anchor">#</a> 2. instanceof</h3> <p><strong><code>instanceof</code></strong> 运算符用于检测<mark>构造函数的 prototype 属性</mark>是否出现在某个<mark>实例对象的原型链</mark>上。</p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Car</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make
  <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model
  <span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> year
<span class="token punctuation">}</span>
<span class="token keyword">const</span> auto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">'Honda'</span><span class="token punctuation">,</span> <span class="token string">'Accord'</span><span class="token punctuation">,</span> <span class="token number">1998</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>auto <span class="token keyword">instanceof</span> <span class="token class-name">Car</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>auto <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>
</code></pre></div></details> <h3 id="_3-constructor构造函数"><a href="#_3-constructor构造函数" class="header-anchor">#</a> 3. constructor构造函数</h3> <p><strong><code>constructor</code></strong> 对象的原型链下（构造函数的原型下）有一个属性，叫constructor，可以通过访问对象得到其对应的隐式原型对象的constructor值。</p> <p>constructor值往往可以使用原型对象进行修改，不可靠，容易被修改</p> <h3 id="_4-object-prototype-tostring"><a href="#_4-object-prototype-tostring" class="header-anchor">#</a> 4. Object.prototype.toString</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Car</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make
  <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model
  <span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> year
<span class="token punctuation">}</span>
<span class="token keyword">const</span> auto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">'Honda'</span><span class="token punctuation">,</span> <span class="token string">'Accord'</span><span class="token punctuation">,</span> <span class="token number">1998</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>auto<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Array</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// String</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Undefined</span>
</code></pre></div></details> <h2 id="_5-事件循环eventloop"><a href="#_5-事件循环eventloop" class="header-anchor">#</a> 5.事件循环EventLoop  <span class="badge error" style="vertical-align:top;" data-v-368b07b1>高级</span></h2> <p><img src="/frontend-docs/assets/img/eventloop.11db12c2.png" alt="eventloop.png"></p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Timeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 输出顺序: Script start -&gt; Script end -&gt; Promise 1 -&gt; Promise 2 -&gt; Timeout</span>
</code></pre></div></details> <p><img src="/frontend-docs/assets/img/gid1.6.da3de0be.gif" alt="gid1.6.gif"> <img src="/frontend-docs/assets/img/2023-04-21114546.1f1a1332.png" alt="2023-04-21114546.png"> <img src="/frontend-docs/assets/img/68747470733a2f2f75706c6f6.4518c6d4.gif" alt="68747470733a2f2f75706c6f6.gif">
我们都知道，javascript从诞生之日起就是一门单线程的非阻塞的脚本语言。这是由其最初的用途来决定的：与浏览器交互。</p> <p>单线程意味着，javascript代码在执行的任何时候，都只有一个主线程来处理所有的任务。</p> <p>而非阻塞则是当代码需要进行一项异步任务（无法立刻返回结果，需要花一定时间才能返回的任务，如I/O事件）的时候，主线程会挂起（pending）这个任务，然后在异步任务返回结果的时候再根据一定规则去执行相应的回调。</p> <p>单线程是必要的，也是javascript这门语言的基石，原因之一在其最初也是最主要的执行环境——浏览器中，我们需要进行各种各样的dom操作。试想一下 如果javascript是多线程的，那么当两个线程同时对dom进行一项操作，例如一个向其添加事件，而另一个删除了这个dom，此时该如何处理呢？因此，为了保证不会 发生类似于这个例子中的情景，javascript选择只用一个主线程来执行代码，这样就保证了程序执行的一致性。</p> <p>当然，现如今人们也意识到，单线程在保证了执行顺序的同时也限制了javascript的效率，因此开发出了web worker技术。这项技术号称让javascript成为一门多线程语言。</p> <p>然而，使用web worker技术开的多线程有着诸多限制，例如：所有新线程都受主线程的完全控制，不能独立执行。这意味着这些“线程” 实际上应属于主线程的子线程。另外，这些子线程并没有执行I/O操作的权限，只能为主线程分担一些诸如计算等任务。所以严格来讲这些线程并没有完整的功能，也因此这项技术并非改变了javascript语言的单线程本质。</p> <p>可以预见，未来的javascript也会一直是一门单线程的语言。</p> <p>话说回来，前面提到javascript的另一个特点是“非阻塞”，那么javascript引擎到底是如何实现的这一点呢？答案就是今天这篇文章的主角——event loop（事件循环）
<a href="https://dev.to/lydiahallie/javascript-visualized-event-loop-3dif" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://zhuanlan.zhihu.com/p/33058983" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://zhuanlan.zhihu.com/p/617068725" target="_blank" rel="noopener noreferrer">参考3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_6-变量提升、暂时性死区"><a href="#_6-变量提升、暂时性死区" class="header-anchor">#</a> 6. 变量提升、暂时性死区 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <ul><li>变量提升Hoisting
“变量提升”意味着变量和函数的声明会在物理层面移动到代码的最前面，但这么说并不准确。实际上变量和函数声明在代码里的位置是不会动的，而是在编译阶段被放入内存中。</li></ul> <p>函数和变量相比，会被优先提升。这意味着函数会被提升到更靠前的位置。</p> <p>JavaScript 只会提升声明，不会提升其初始化。</p> <p>函数声明整体提升
//函数声明式：
function foo () {}
//变量形式声明：
var fn = function () {}</p> <p>变量声明提升</p> <ul><li>暂时性死区
从一个代码块的开始直到代码执行到声明变量的行之前，let 或 const 声明的变量都处于“暂时性死区”（Temporal dead zone，TDZ）中。</li></ul> <p>当变量处于暂时性死区之中时，其尚未被初始化，尝试访问变量将抛出 ReferenceError。当代码执行到声明变量所在的行时，变量被初始化为一个值。如果声明中未指定初始值，则变量将被初始化为 undefined。</p> <p>与 var 声明的变量不同，如果在声明前访问了变量，变量将会返回 undefined。以下代码演示了在使用 let 和 var 声明变量的行之前访问变量的不同结果。</p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token comment">// TDZ starts at beginning of scope</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
  <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// End of TDZ (for foo)</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h2 id="_7-伪数组-arraylike"><a href="#_7-伪数组-arraylike" class="header-anchor">#</a> 7. 伪数组(ArrayLike)  <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <h3 id="_1、伪数组的定义和特性"><a href="#_1、伪数组的定义和特性" class="header-anchor">#</a> 1、伪数组的定义和特性</h3> <p>伪数组 (ArrayLike) ，又称类数组。是一个类似数组的对象，但是有如下几个特征。</p> <ul><li><p>按索引方式储存数据: 0: xxx, 1: xxx, 2: xxx...</p></li> <li><p>具有length属性（但是length属性不是动态的，不会随着成员的变化而改变）</p></li> <li><p>不具有数组的push， forEach等方法</p></li></ul> <p>常见的典型伪数组，包括jQuery中通过 $() 获取的DOM元素集, 函数中的的 arguments 对象， 以及字符串String对象。</p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

arrLike<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//'b'</span>
arrLike<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">//3</span>
arrLike<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Uncaught TypeError: arrLike.push is not a function</span>
</code></pre></div></details> <h3 id="_2、伪数组转化成真数组的方法"><a href="#_2、伪数组转化成真数组的方法" class="header-anchor">#</a> 2、伪数组转化成真数组的方法</h3> <ul><li>遍历添加入一个空数组</li></ul> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arrLike<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//  ['a', 'b', 'c']</span>
</code></pre></div></details> <ul><li>利用数组的slice()方法</li></ul> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">)</span>

<span class="token comment">// 简写语法</span>
<span class="token comment">// var arr = [].slice.call(arrLike)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//  ['a', 'b', 'c']</span>
</code></pre></div></details> <ul><li>ES2015(es6)中的Array.from()方法</li></ul> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//  ['a', 'b', 'c']</span>
</code></pre></div></details> <h2 id="_8-window-onload与-documetn-ready区别"><a href="#_8-window-onload与-documetn-ready区别" class="header-anchor">#</a> 8. window.onload与$(documetn).ready区别  <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <ul><li>window.onload是Javascript中得函数，意思是：等待网页中所有内容加载完毕之后（包括图片）；</li> <li>而$(documetn).ready()是在网页中的所有DOM结构绘制完毕之后就可以执行了，可能有与DOM关联的元素还没有加载完，所以相比之下更快一些；</li></ul> <p>当 HTML 文档解析完成就会触发 DOMContentLoaded，而所有资源加载完成之后，load 事件才会被触发。</p> <p>另外需要提一下的是，我们在 jQuery 中经常使用的 $(document).ready(function() { // …代码… }); 其实监听的就是 DOMContentLoaded 事件，而 $(document).load(function() { // …代码… }); 监听的是 load 事件。
这两个事件有啥区别呢？点击这个网页你就能明白：<a href="https://testdrive-archive.azurewebsites.net/HTML5/DOMContentLoaded/Default.html" target="_blank" rel="noopener noreferrer">演示DOMContentLoaded和Load<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_9-script-标签执行与加载时机-defer、async-和防阻塞方法"><a href="#_9-script-标签执行与加载时机-defer、async-和防阻塞方法" class="header-anchor">#</a> 9. script 标签执行与加载时机：defer、async 和防阻塞方法  <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <p>脚本阻塞问题实际有两种解决方案 —— async 和 defer。</p> <p>览器遇到 async 脚本时不会阻塞页面渲染，而是直接下载然后运行。这样脚本的运行次序就无法控制，只是脚本不会阻止剩余页面的显示。当页面的脚本之间彼此独立，且不依赖于本页面的其他任何脚本时，async 是最理想的选择。</p> <p>脚本调用策略小结</p> <p>如果脚本无需等待页面解析，且无依赖独立运行，那么应使用 async。</p> <p>如果脚本需要等待页面解析，且依赖于其他脚本，调用这些脚本时应使用 defer，将关联的脚本按所需顺序置于 HTML 中。</p> <p>Defer 和 async 的相同点</p> <ul><li>加载文件时不阻塞页面渲染</li> <li>对于 inline 的 script 无效</li> <li>使用这两个属性的脚本中不能调用 document.write 方法</li> <li>有脚本的 onload 的事件回调</li></ul> <p>Defer 和 async 的区别</p> <ul><li><p>html4.0 中定义了 defer；html5.0 中定义了 async</p></li> <li><p>浏览器支持不同</p></li> <li><p>加载时机：</p> <p>具有 async 属性的脚本都在它下载结束之后立刻执行，所以就有可能出现脚本执行顺序被打乱的情况。同时会在 window 的 load 事件之前执行。</p> <p>具有 defer 属性的脚本都是在页面解析完毕之后，按照原本script标签引入的顺序执行，同时会在 document 的 DOMContentLoaded事件 之前执行。</p></li></ul> <p>defer 与 DOMContentLoaded</p> <p>如果 script 标签中包含 defer，那么这一块脚本将不会影响 HTML 文档的解析，而是等到 HTML 解析完成后才会执行。而 DOMContentLoaded 只有在 defer 脚本执行结束后才会被触发。 所以这意味着什么呢？HTML 文档解析不受影响，等 DOM 构建完成之后 defer 脚本执行，但脚本执行之前需要等待 CSSOM 构建完成。在 DOM、CSSOM 构建完毕，defer 脚本执行完成之后，DOMContentLoaded 事件触发。</p> <p>async 与 DOMContentLoaded</p> <p>如果 script 标签中包含 async，则 HTML 文档构建不受影响，解析完毕后，DOMContentLoaded 触发，而不需要等待 async 脚本执行、样式表加载等等</p> <p><a href="https://juejin.cn/post/6908315682404843528" target="_blank" rel="noopener noreferrer">参照1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/qq_43812731/article/details/121274406" target="_blank" rel="noopener noreferrer">参照2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_10-commonjs-es6-module的区别"><a href="#_10-commonjs-es6-module的区别" class="header-anchor">#</a> 10. commonjs es6 module的区别  <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <p><a href="https://www.jianshu.com/p/7472f0dfab55" target="_blank" rel="noopener noreferrer">前端各种模块化方案总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_11-some-every-reduce函数"><a href="#_11-some-every-reduce函数" class="header-anchor">#</a> 11. some every reduce函数 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <p>注意了解这类系统高阶函数的使用</p> <h2 id="_12-es6新语法"><a href="#_12-es6新语法" class="header-anchor">#</a> 12. ES6新语法 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <ul><li>新的变量声明方式
let、const
块级作用域与不再具备变量提升</li></ul> <p>在块中变量会陷入暂时性死区直到该变量的声明被处理</p> <ul><li><p>解析结构
解构数组、解构对象</p></li> <li><p>模板字符串</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, how are you </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><ul><li>默认参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'Student'</span><span class="token punctuation">,</span> greeting <span class="token operator">=</span> <span class="token string">'Welcome'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Greeting<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>展开运算符
...</p></li> <li><p>rest 参数
fn (形参1, 形参2, ...rest变量名) {}</p></li> <li><p>箭头函数
() =&gt; {}</p></li></ul> <p>箭头函数表达式的语法比函数表达式更简洁，并且没有自己的this，arguments，super或new.target。箭头函数表达式更适用于那些本来需要匿名函数的地方，并且它不能用作构造函数。</p> <ul><li>对象字面量简写法
当属性与值的变量同名时</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> type <span class="token operator">=</span> <span class="token string">'quartz'</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">'rose'</span>
<span class="token keyword">let</span> carat <span class="token operator">=</span> <span class="token number">21.29</span>
<span class="token comment">//es5</span>
<span class="token keyword">const</span> gemstone <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> color<span class="token punctuation">,</span>
  <span class="token literal-property property">carat</span><span class="token operator">:</span> carat
<span class="token comment">//es6</span>
<span class="token keyword">const</span> gemstone <span class="token operator">=</span> <span class="token punctuation">{</span>type<span class="token punctuation">,</span>color<span class="token punctuation">,</span>carat<span class="token punctuation">}</span>
</code></pre></div><p>简写方法的名称</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> gemstone <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;对象字面量方法简写&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
gemstone<span class="token punctuation">.</span><span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>在对象字面量中可以使用中括号作为属性，表示属性也能是一个变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Jane'</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span>   <span class="token comment">//'Jane':true</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>Jane<span class="token punctuation">)</span>
</code></pre></div><ul><li>Class类</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5</span>
<span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token comment">// 原型方法</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span> 
<span class="token comment">//静态属性</span>
Person<span class="token punctuation">.</span>info<span class="token operator">=</span><span class="token string">'静态属性'</span>

<span class="token comment">// ES6</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 构造函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
      <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 原型方法（千万不要加上function）</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//静态属性</span>
Person<span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token string">'静态属性'</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;qiu&quot;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//qiu</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>info<span class="token punctuation">)</span> <span class="token comment">//静态属性</span>
</code></pre></div><ul><li><p>Set和Map</p></li> <li><p>模块语法
import export</p></li></ul> <p><a href="https://www.jianshu.com/p/5511bf45642b/" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_13-跨域的解决方案"><a href="#_13-跨域的解决方案" class="header-anchor">#</a> 13. 跨域的解决方案</h2> <ul><li>1、 通过jsonp跨域</li> <li>2、 document.domain + iframe跨域</li> <li>3、 location.hash + iframe</li> <li>4、 window.name + iframe跨域</li> <li>5、 postMessage跨域</li> <li>6、 跨域资源共享（CORS）</li> <li>7、 nginx代理跨域</li> <li>8、 nodejs中间件代理跨域</li> <li>9、 WebSocket协议跨域</li></ul> <p>JSONP包含两部分：回调函数和数据。</p> <p>回调函数是当响应到来时要放在当前页面被调用的函数。</p> <p>数据就是传入回调函数中的json数据，也就是回调函数的参数了。</p> <p>jsonp虽然很简单，但是有如下缺点：</p> <p>1）安全问题(请求代码中可能存在安全隐患)</p> <p>2）要确定jsonp请求是否失败并不容易</p> <p><a href="https://blog.csdn.net/MoXinXueWEB/article/details/125992708" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_14-内存泄漏"><a href="#_14-内存泄漏" class="header-anchor">#</a> 14. 内存泄漏 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p>像 C 语言这样的底层语言一般都有底层的内存管理接口，比如 malloc()和free()。相反，JavaScript 是在创建变量（对象，字符串等）时自动进行了分配内存，并且在不使用它们时“自动”释放。释放的过程称为垃圾回收。这个“自动”是混乱的根源，并让 JavaScript（和其他高级语言）开发者错误的感觉他们可以不关心内存管理。<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_management" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>可能会造成内存泄漏的情况</p> <p>内存泄漏（Memory Leak）的定义：</p> <p>程序的运行需要内存。只要程序提出要求，操作系统或者运行时就必须供给内存。对于持续运行的服务进程，必须及时释放不再用到的内存，否则内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。</p> <p>内存泄漏（Memory Leak）是指在计算机科学中，由于疏忽或错误造成程序未能释放已经不再使用的内存，并非指内存在物理上的消失，而是应用程序分配某段内存后，由于设计错误导致在释放该段内存之前就失去了对该段内存的控制，从而造成了内存的浪费。</p> <ul><li>被遗忘的定时器或回调函数：
设置了setInterval()定时器而忘记取消它，如果循环函数的引用的话，那么这个变量一直留在内存中无法被回收。</li></ul> <details class="custom-block details"><summary>code 查看</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Jake'</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div></details> <ul><li><p>不合理的使用闭包</p></li> <li><p>脱离DOM的引用
获取一个DOM元素的引用，而后面这个元素被删除，但由于一直保留了对这个元素的引用，所以它也无法被回收。</p></li></ul> <details class="custom-block details"><summary>code 查看</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> refA <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'refA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>refA<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除DOM</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>refA<span class="token punctuation">,</span> <span class="token string">'refA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 但是还存在引用，能console.log出整个div,没有被回收</span>
refA <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>refA<span class="token punctuation">,</span> <span class="token string">'refA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解除引用，内存回收</span>
</code></pre></div></details> <h3 id="_15-set与map"><a href="#_15-set与map" class="header-anchor">#</a> 15. Set与Map <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h3> <p><a href="https://blog.csdn.net/muzidigbig/article/details/121995777" target="_blank" rel="noopener noreferrer">Set与Map<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_16-浅拷贝、深度拷贝的实现"><a href="#_16-浅拷贝、深度拷贝的实现" class="header-anchor">#</a> 16. 浅拷贝、深度拷贝的实现 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h3> <ul><li>浅拷贝</li></ul> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'旺仔'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'吃'</span><span class="token punctuation">,</span> <span class="token string">'玩'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">toy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'小皮球'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'黑白'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'骨头'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'粉色'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">clone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>attr <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span>
    <span class="token punctuation">}</span>
    temp<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> temp
<span class="token punctuation">}</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>

d<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'睡'</span><span class="token punctuation">)</span>

<span class="token comment">// 修改拷贝对象的hobby，原对象hobby也发生改变，因为hobby是Array 引用类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>hobby<span class="token punctuation">)</span> <span class="token comment">// ['吃', '玩', '睡']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>hobby<span class="token punctuation">)</span> <span class="token comment">// ['吃', '玩', '睡']</span>

<span class="token comment">// 修改拷贝对象的toy[0].name 为 足球，原对象toy也发生改变，因为toy是Object 引用类型</span>
d<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'足球'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '足球'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '足球'</span>

</code></pre></div></details> <p>es6 扩展运算符 ...</p> <p>Object.assign() 对象的合并</p> <ul><li>深度拷贝</li></ul> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'旺仔'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'吃'</span><span class="token punctuation">,</span> <span class="token string">'玩'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">toy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'小皮球'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'黑白'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'骨头'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'粉色'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> temp <span class="token operator">=</span>  <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Array'</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>attr <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">continue</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 标量数据类型 Number、String等</span>
      temp<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 引用数据类型 Array、Object</span>
      temp<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> temp
<span class="token punctuation">}</span>

<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>

d<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'睡'</span><span class="token punctuation">)</span>

<span class="token comment">// 修改深度拷贝对象的hobby，原对象hobby不发生改变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>hobby<span class="token punctuation">)</span> <span class="token comment">// ['吃', '玩', '睡']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>hobby<span class="token punctuation">)</span> <span class="token comment">// ['吃', '玩']</span>

<span class="token comment">// 修改深度拷贝对象的toy[0].name 为 足球，原对象toy不发生改变</span>
d<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'足球'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '足球'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>toy<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '小皮球'</span>

</code></pre></div></details> <p>json暴力转化</p> <p>通过JSON.stringify() 和 JSON.parse() 将对象转为字符串之后在转为对象。</p> <p>这种简单粗暴的方式有局限性，当值为undefined、function、symbol会在转换过程中被忽略。</p> <h2 id="_17-箭头函数与普通函数的区别"><a href="#_17-箭头函数与普通函数的区别" class="header-anchor">#</a> 17. 箭头函数与普通函数的区别 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">箭头函数表达式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的语法比函数表达式更简洁，并且没有自己的this，arguments，super或new.target。箭头函数表达式更适用于那些本来需要匿名函数的地方，并且它不能用作构造函数。</p> <p>引入箭头函数有两个方面的作用：更简短的函数并且不绑定this</p> <p>函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。当对箭头函数使用call()和apply()方法时对函数内的this没有影响。</p> <p>不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</p> <p>不可以使用arguments对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</p> <p>不可以使用yield命令，因此箭头函数不能用作 Generator 函数。</p> <p>箭头函数没有原型属性。</p> <p><a href="https://zhuanlan.zhihu.com/p/47132493" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/m0_62118859/article/details/124661031" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_18-web-worker线程"><a href="#_18-web-worker线程" class="header-anchor">#</a> 18. Web Worker线程 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h3> <p><a href="https://cloud.tencent.com/developer/article/1753487" target="_blank" rel="noopener noreferrer">Web Worker <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的运用</p> <h3 id="_19-进程-process-和线程-thread-的定义和区别"><a href="#_19-进程-process-和线程-thread-的定义和区别" class="header-anchor">#</a> 19. 进程（process）和线程（thread）的定义和区别 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h3> <p>进程：进程是系统分配资源和调度的基本单位，也就是说进程可以单独运行一段程序。</p> <p>线程：线程是cpu调度和分派的最小基本单位。</p> <p>开门见山地说吧。</p> <p>进程就是应用程序在内存中分配的空间，也就是正在运行的程序，各个进程之间互不干扰。同时进程保存着程序每一个时刻运行的状态。</p> <p>此时，CPU采用时间片轮转的方式运行进程：CPU为每个进程分配一个时间段，称作它的时间片。如果在时间片结束时进程还在运行，则暂停这个进程的运行，并且CPU分配给另一个进程（这个过程叫做上下文切换）。如果进程在时间片结束前阻塞或结束，则CPU立即进行切换，不用等待时间片用完。</p> <p>使用进程+CPU时间片轮转方式的操作系统，在宏观上看起来同一时间段执行多个任务，换句话说，进程让操作系统的并发成为了可能。虽然并发从宏观上看有多个任务在执行，但在事实上，对于单核CPU来说，任意具体时刻都只有一个任务在占用CPU资源。</p> <p>虽然进程的出现，使得操作系统的性能大大提升，但是随着时间的推移，人们并不满足一个进程在一段时间只能做一件事情，如果一个进程有多个子任务时，只能逐个地执行这些子任务，很影响效率。</p> <p>那么能不能让这些子任务同时执行呢？于是人们又提出了线程的概念，让一个线程执行一个子任务，这样一个进程就包含了多个线程，每个线程负责一个单独的子任务。</p> <p>总之，进程和线程的提出极大地提高了操作系统的性能。进程让操作系统的并发性成为了可能，而线程让进程的内部并发成为了可能。</p> <ul><li><p>区别：
1.一个进程可以包含至少一个线程，一般来说也就是主线程，而一个线程只能属于一个进程；
2.进程拥有独立的内存，而线程没有独立的资源空间， 只是暂时存储在计数器，寄存器，栈中，同一个进程间的线程可以共享资源。
3.将代码放入到代码区之后，进程产生，但还没执行，我们所说的执行一般是是主线程main函数开始执行。
4.进程比线程更加消耗资源
5.进程对资源的保护要求高，而线程要求不高
6.进程是处理器这一层面的抽象，而线程是进程的基础上进一步并发的抽象
7.同一个进程下，一个线程的挂掉，会导致整个进程的挂掉，而进程之间不会相互影响
8.总的来说：我们都知道程序不能单独运行，只有将它放入内存中，分配资源才能运行，程序是指令的集合，而进程是程序的一次执行活动，属于动态概念
9.我们可以打个比方:进程相当于某一个大型项目，世界上可能有人同时在做这个项目，有其独特的方式；而线程就相当于这个项目下的一些程序员，多个程序员去完成这一个项目肯定要比一个人完成快的多，也就是能在同一时间操作。</p></li> <li><p>决定同步：
1.互斥锁：同一个进程下，当某个线程使用进程的共享资源时，其他线程必须等待该线程结束
2.信号量：进程拥有同一时间最大访问数量</p></li></ul> <p>操作系统的设计，因此可以归结为三点：</p> <p>以多进程形式，允许多个任务同时运行；</p> <p>以多线程形式，允许单个任务分成不同的部分运行；</p> <p>提供协调机制，一方面防止进程之间和线程之间产生冲突，另一方面允许进程之间和线程之间共享资源。</p> <h2 id="_20-xss-cross-site-scripting-跨站脚本、csrf-cross-site-request-forgery-跨站请求伪造"><a href="#_20-xss-cross-site-scripting-跨站脚本、csrf-cross-site-request-forgery-跨站请求伪造" class="header-anchor">#</a> 20. XSS（Cross Site Scripting）跨站脚本、CSRF（Cross-site request forgery）跨站请求伪造 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p>XSS（Cross Site Scripting）全称跨站脚本，为了与层叠样式表(Cascading Style Sheets, CSS)的缩写混淆，故将跨站脚本缩写为XSS。
XSS是一种经常出现在web应用中的计算机安全漏洞，它允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如这些代码包括HTML代码和客户端脚本。</p> <p><a href="https://blog.51cto.com/u_15917617/5953280" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_21-高并发"><a href="#_21-高并发" class="header-anchor">#</a> 21. 高并发 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p>https://zhuanlan.zhihu.com/p/48758405</p> <h2 id="_22-js异步"><a href="#_22-js异步" class="header-anchor">#</a> 22. js异步 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://imtaotao.github.io/co-share/#/title" target="_blank" rel="noopener noreferrer">异步发展史<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://es6.ruanyifeng.com/#docs/generator-async" target="_blank" rel="noopener noreferrer">Generator yield控制异步<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">getData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// settimeout 模拟api 异步请求</span>
  <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <p><img src="/frontend-docs/assets/img/2023-04-19155331.4e2dfdc3.png" alt="2023-04-19155331.png"> <a href="https://es6.ruanyifeng.com/#docs/generator-async" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_23-手写promise"><a href="#_23-手写promise" class="header-anchor">#</a> 23. 手写Promise <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 部分实现，不完整、未优化</span>
<span class="token keyword">function</span> <span class="token function">PromiseBeta</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">PENDING</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

      <span class="token function">executor</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">FULFILLED</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            callback<span class="token punctuation">.</span><span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">REJECTED</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            callback<span class="token punctuation">.</span><span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// 待定（pending）：初始状态，既没有被兑现，也没有被拒绝</span>
      <span class="token constant">PENDING</span><span class="token operator">:</span> <span class="token string">'pending'</span><span class="token punctuation">,</span>
      <span class="token comment">// 已兑现（fulfilled）：意味着操作成功完成</span>
      <span class="token constant">FULFILLED</span><span class="token operator">:</span> <span class="token string">'fulfilled'</span><span class="token punctuation">,</span>
      <span class="token comment">// 已拒绝（rejected）：意味着操作失败</span>
      <span class="token constant">REJECTED</span><span class="token operator">:</span> <span class="token string">'rejected'</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">PromiseBeta</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        onFulfilled <span class="token operator">=</span> <span class="token keyword">typeof</span> onFulfilled <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function-variable function">onFulfilled</span> <span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value
        onRejected <span class="token operator">=</span> <span class="token keyword">typeof</span> onRejected <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function-variable function">onRejected</span> <span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token function-variable function">onFulfilled</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function-variable function">onRejected</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">FULFILLED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> PromiseBeta<span class="token punctuation">.</span><span class="token constant">STATUS</span><span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    PromiseBeta<span class="token punctuation">.</span><span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> 
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    PromiseBeta<span class="token punctuation">.</span><span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> 
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    

    <span class="token comment">// 调用</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3333</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'SUCCESS'</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
        <span class="token comment">// reject('fAILED')</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>


      PromiseBeta<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PromiseBeta</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'resolve PromiseBeta.resolve'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></details> <p><a href="https://www.bilibili.com/video/BV137411e7KA?p=16&amp;vd_source=bb56aa27fd727ed342a55bd4a3869b50" target="_blank" rel="noopener noreferrer">手写Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_24-设计原则"><a href="#_24-设计原则" class="header-anchor">#</a> 24. 设计原则 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p>开放封闭原则、单一职责原则</p> <h2 id="_25-常用设计模式"><a href="#_25-常用设计模式" class="header-anchor">#</a> 25. 常用设计模式 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://zhuanlan.zhihu.com/p/465206177" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://baike.baidu.com/item/JavaScript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/18598570?fr=aladdin" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.jianshu.com/p/403b95166b56" target="_blank" rel="noopener noreferrer">参考3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_26-继承方式"><a href="#_26-继承方式" class="header-anchor">#</a> 26. 继承方式 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <h3 id="_1、原型链"><a href="#_1、原型链" class="header-anchor">#</a> 1、原型链</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'狗'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺仔'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'中华田园犬'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>type<span class="token punctuation">,</span> dog<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>type<span class="token punctuation">)</span>

<span class="token comment">/* 缺点：
1、在原型上继承的引用类型属性，在某个实例上进行修改后会引起对原型对象上的共有属性值变化，从而影响到其它实例；
2、在创建子类型实例时，无法向父类型的构造函数传递参数； */</span>
</code></pre></div></details> <h3 id="_2-借用构造函数"><a href="#_2-借用构造函数" class="header-anchor">#</a> 2. 借用构造函数</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺仔'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'狗'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>

<span class="token comment">/* 缺点：1、子类实例无法使用父类原型上的共有属性；
2、导致原来的共有方法也得在父类构造函数中定义，也就无法实现方法的真正复用，此种情形下的子类每个实例都会拷贝一份eat方法 */</span>
</code></pre></div></details> <h3 id="_3-组合继承"><a href="#_3-组合继承" class="header-anchor">#</a> 3. 组合继承</h3> <p>组合继承( combination inheritance)，有时候也叫做伪经典继承，指的是将原型链和借用构造函数的技术组合到块，从而发挥二者之长的一种继承模式。其背后的思路是使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承。这样，既通过在原型上定义方法实现了函数复用，又能够保证每个实例都有它自己的属性。</p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type
  <span class="token punctuation">}</span>
  <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺仔'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'狗'</span><span class="token punctuation">)</span>
  dog<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'比熊'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>

<span class="token comment">/* 组合继承避免了原型链和借用构造函数的缺陷，融合了它们的优点，成为JavaScript中最常用的继承模式。而且，instanceof和isprototypeof( )也能够用于识别基于组合继承创建的对象。
不过组合式继承会要调用两次父类构造函数，一次是在创建子类原型对象时，另一次是在子类构造函数中，这样使得不仅子类实例具有父类的全部属性，还导致子类原型对象上也包含了父类的全部属性，造成了属性的冗余。 */</span>
</code></pre></div></details> <h3 id="_4、原型式继承"><a href="#_4、原型式继承" class="header-anchor">#</a> 4、原型式继承</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">object</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> dog01 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'旺财'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> dog02 <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>dog01<span class="token punctuation">)</span>
  dog02<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'旺仔'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog01<span class="token punctuation">,</span> dog02<span class="token punctuation">,</span> dog02<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token comment">/* 在没有必要兴师动众地创建构造函数，而只想让一个对象与另一个对象保持类似的情况下，原型式继承是完全可以胜任的。不过别忘了，包含引用类型值的属性始终都会共享相应的值，就像使用原型模式一样。 */</span>
</code></pre></div></details> <h3 id="_5、寄生式继承"><a href="#_5、寄生式继承" class="header-anchor">#</a> 5、寄生式继承</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">object</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">createAnother</span> <span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> 
    clone<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//以某种方式来增强这个对象</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'汪、汪、汪'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> clone
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> dog01 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'旺财'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> dog02 <span class="token operator">=</span> <span class="token function">createAnother</span><span class="token punctuation">(</span>dog01<span class="token punctuation">)</span>
  dog02<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'旺仔'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog01<span class="token punctuation">,</span> dog02<span class="token punctuation">)</span>
  dog02<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/* 在主要考虑对象而不是自定义类型和构造函数的情况下，寄生式继承也是一种有用的模式。前面示范继承模式时使用的object ()函数不是必需的;任何能够返回新对象的函数都适用于此模式。
使用寄生式继承来为对象添加函数，会由于不能做到函数复用而降低效率;这一点与构造函数模式类似。 */</span>
</code></pre></div></details> <h3 id="_6、寄生组合式继承"><a href="#_6、寄生组合式继承" class="header-anchor">#</a> 6、寄生组合式继承</h3> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">object</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">inheritPrototype</span> <span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> prototype <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
    prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType
    subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type
  <span class="token punctuation">}</span>
  <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span> <span class="token operator">+</span> food<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token function">inheritPrototype</span><span class="token punctuation">(</span>Dog<span class="token punctuation">,</span> Animal<span class="token punctuation">)</span>
  <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'汪、汪、汪'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺仔'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'狗'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>
  dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">'骨头'</span><span class="token punctuation">)</span>
<span class="token comment">/* 这个例子的高效率体现在它只调用了一次 superType构造函数，并且因此避免了在subType.prototype 上面创建不必要的、多余的属性。与此同时，原型链还能保持不变;因此，还能够正常使用instanceof和isPrototypeof()。开发人员普遍认为寄生组合式继承是引用类型最理想的继承范式。 */</span>
</code></pre></div></details> <h2 id="_27-正则"><a href="#_27-正则" class="header-anchor">#</a> 27. 正则 <span class="badge warning" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_expressions" target="_blank" rel="noopener noreferrer">正则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_28-观察者模式与发布-订阅模式区别"><a href="#_28-观察者模式与发布-订阅模式区别" class="header-anchor">#</a> 28. 观察者模式与发布/订阅模式区别</h2> <p>有人把观察者（Observer）模式等同于发布（Publish）/订阅（Subscribe）模式，也有人认为这两种模式还是存在差异，而我认为确实是存在差异的，本质上的区别是调度的地方不同。</p> <h3 id="_1、观察者模式"><a href="#_1、观察者模式" class="header-anchor">#</a> 1、观察者模式</h3> <p>比较概念的解释是，目标和观察者是基类，目标提供维护观察者的一系列方法，观察者提供更新接口。具体观察者和具体目标继承各自的基类，然后具体观察者把自己注册到具体目标里，在具体目标发生变化时候，调度观察者的更新方法。</p> <p>比如有个“天气中心”的具体目标A，专门监听天气变化，而有个显示天气的界面的观察者B，B就把自己注册到A里，当A触发天气变化，就调度B的更新方法，并带上自己的上下文。
<img src="/frontend-docs/assets/img/guanchazhe.73fc6ff7.png" alt="guanchazhe.png"></p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 观察者模式</span>
<span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">addSub</span><span class="token punctuation">(</span><span class="token parameter">sub</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> sub <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sub<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

subject<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span>
subject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="_2、发布-订阅模式"><a href="#_2、发布-订阅模式" class="header-anchor">#</a> 2、发布/订阅模式</h3> <p>比较概念的解释是，订阅者把自己想订阅的事件注册到调度中心，当该事件触发时候，发布者发布该事件到调度中心（顺带上下文），由调度中心统一调度订阅者注册到调度中心的处理代码。</p> <p>比如有个界面是实时显示天气，它就订阅天气事件（注册到调度中心，包括处理程序），当天气变化时（定时获取数据），就作为发布者发布天气信息到调度中心，调度中心就调度订阅者的天气处理程序。
<img src="/frontend-docs/assets/img/fabudingyue.47d98eef.png" alt="fabudingyue.png"></p> <details class="custom-block details"><summary>code 查看代码</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发布-订阅模式</span>
<span class="token keyword">var</span> pubsub <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 主题</span>
  <span class="token keyword">var</span> topics <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token comment">// 添加订阅</span>
  <span class="token keyword">function</span> <span class="token function">subscribe</span> <span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 发布</span>
  <span class="token keyword">function</span> <span class="token function">publish</span> <span class="token punctuation">(</span><span class="token parameter">topic<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> fn <span class="token keyword">of</span> topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    subscribe<span class="token punctuation">,</span>
    publish
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span><span class="token punctuation">,</span> food<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃'</span><span class="token punctuation">,</span> food<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'米饭'</span><span class="token punctuation">)</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'蔬菜'</span><span class="token punctuation">)</span>
</code></pre></div></details> <p>总结</p> <ol><li>从两张图片可以看到，最大的区别是调度的地方。</li></ol> <p>虽然两种模式都存在订阅者和发布者（具体观察者可认为是订阅者、具体目标可认为是发布者），但是观察者模式是由具体目标调度的，而发布/订阅模式是统一由调度中心调的，所以观察者模式的订阅者与发布者之间是存在依赖的，而发布/订阅模式则不会。</p> <ol start="2"><li>两种模式都可以用于松散耦合，改进代码管理和潜在的复用。</li></ol> <p><a href="https://www.cnblogs.com/lovesong/p/5272752.html" target="_blank" rel="noopener noreferrer">参考1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.jianshu.com/p/f0f22398d25d" target="_blank" rel="noopener noreferrer">参考2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_27-常用js函数"><a href="#_27-常用js函数" class="header-anchor">#</a> 27. 常用JS函数 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>初级</span></h2> <p>splice、slice、<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener noreferrer">sort<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、reduce</p> <h2 id="_28-参数默认值、递归、预编译、暗示全局变量"><a href="#_28-参数默认值、递归、预编译、暗示全局变量" class="header-anchor">#</a> 28. 参数默认值、递归、预编译、暗示全局变量 <span class="badge tip" style="vertical-align:top;" data-v-368b07b1>中级</span></h2> <p><a href="https://blog.csdn.net/weixin_43503511/article/details/116608494" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/frontend-docs/assets/js/app.111ced23.js" defer></script><script src="/frontend-docs/assets/js/2.b54963b0.js" defer></script><script src="/frontend-docs/assets/js/3.5b4c0c8b.js" defer></script><script src="/frontend-docs/assets/js/7.661b4eb6.js" defer></script>
  </body>
</html>
